<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<TITLE>Git не для чайников</TITLE>
<meta name="KeyWords" content="git">
</HEAD>
<BODY BGCOLOR="#DDE1C2" TEXT="#002040">

<div style="width:85%;  margin: auto;">
 
<h1>Терминалы</h1>

<h2>Основы</h2>

<p>Давайте для начала разберемся, что такое Terminal, Shell, Console, чем отличается Terminal Emulator от обычного Terminal и почему он так назван. Информации об этом написано уже довольно много, поэтому ничего нового вы здесь не услышите. Почти вся информация здесь была взята из интернета, ссылки приведу в конце статьи. Кто уже знает, что все эти вещи обозначают, может смело пропускать данный раздел.</p>

<h3>Teletype</h3>

<p>Было время, когда для работы с компьютерами использовали устройства под названием <strong>телетайп (teletype или сокращенно TTY)</strong>.
Телетайп — электромеханическая печатная машина, изначально разрабатывалась для других целей, а именно для передачи текстовых сообщений между двумя абонентами на дальние расстояния по электрическому каналу связи.
К одному компьютеру можно было подключить несколько телетайпов, благодаря чему, несколько пользователей могли одновременно работать с одним компьютером не мешая друг другу.</p>

<img src="./tty.jpeg" alt="Teletype" title="Teletype" width="430" height="370"><br>

<h3>Terminal</h3>

<p>В <strong>терминале (terminal)</strong> вместо электрической печатной машинки используется дисплей - электронное устройство, предназначенное для визуального отображения информации.
Вначале терминалы были текстовые.
В них использовались текстовые дисплеи, которые позволяли выводить только текстовую информацию.
</p>

<img src="./terminal.jpeg" alt="Terminal" title="Terminal" width="430" height="370"><br>

<h3>Console</h3>

<p>Один из нескольких терминалов, подключенных к компьютеру, назначается в качестве <strong>консоли (console)</strong>.
Это особый терминал на который выводятся сообщения компьютера во время его загрузки.
С консоли производится первоначальная настройка компьютера.</p>

<h3>Shell</h3>

<p>Если телетайп, терминал и консоль это физические устройства, то <strong>shell</strong> это компьютерная программа.
Это не название какой то конкретной программа, а любая программа которая:
<br>- имеет интерфейс командной строки;
<br>- имеет встроенный в эту программу набор высокоуровневых команд управления компьютером;
<br>- позволяет пользователю выполнять эти встроенные команды и запускать другие программы.
<br>
Существует большое количество различных shell'ов.
Самым распространенным сегодня является bash.</p>

<p>Конечно же, и терминалы, и консоли не могли не найти своего отражения в современности. Поэтому далее мы рассмотрим такие вещи, как <em>Terminal Emulator</em> и <em>Virtual Console</em>.</p>

<h3>Графические дисплеи</h3>

<p>Появление графических дисплеев дало возможность выводить на компьютер не только текстовую информацию, но любые изображения.
Однако делать это через те же интерфейсы, что и у текстовых дисплеев невозможно.
Появились специальные интерфейсы, для графических дисплеев.
Они содержали гораздо больше проводов и не позволяли организовывать передачу на большое расстояние.
</p></p>
Клавиатура и графический дисплей стали отдельными устройствами, каждый со своим специфическим интерфейсом.
Текстовые терминалы остались только для удаленных подключений к компьютеру.
</p></p>
Благодаря графическим дисплеям появились не только пользовательские графические программы, но и графические многооконные  оболочки для операционных систем типа X Window System.
</p></p>
Чтобы иметь возможность работать с программами написанными для работы в командной строке shell и не выходить для этого из графической оболочки, были разработаны программы названные <strong>эмуляторами терминала (Terminal Emulator)</strong>.
</p>

<h3>Terminal Emulator</h3>

<p><strong>Terminal Emulator</strong> это графическая программа эмулирующая экран текстового терминала. Эта программа в принципе могла бы включать в себя весь функционал shell, но во всех??? известных эмуляторах она делает только две вещи:
- принимает ввод с клавиатуры и отсылает его какой либо из shell,
- принимает вывод из shell и отображает его в окне эмулятора.</p>
Примеры эмуляторов терминала: gnome-terminal, xterm, konsole.</p>

<p>Shell и Terminal Emulator это не одно и тоже.
Terminal Emulator — GUI приложение, то есть окно в X Window System.
Shell — это command line interpreter, то есть просто исполнитель команд, он не имеет графической оболочки.
Если говорить совсем правильно, вы <strong>не запускаете Bash</strong>, вы <strong>запускаете Terminal Emulator, который запускает внутри себя Bash</strong>.
Terminal Emulator и Bash — абсолютно 2 различные программы.
Первая отвечает исключительно за ввод/вывод, вторая — за обработку команд.</p>

<h3>Virtual Terminal и Virtual Console</h3>

<p>Если вы запустите компьютер с операционной системой Linux, без графической оболочки то, через некоторое время вы окажитесь в командной строке shell.
Если вы нажмите Ctrl+Alt+Fn, где n, цифра от 1 до N (обычно до 6), то вы попадете в другой shell, закрепленный за другим терминалом.
Так за одной парой дисплей + клавиатура, может быть закреплено несколько виртуальных терминалов, каждый со своим shell'ом.
Цифра n - номер виртуального терминала.
Первый??? Virtual Terminal (виртуальный терминал) будет Virtual Console (виртуальной консолью).
Именно в него направляется весь вывод во время загрузки компьютера.</p>

<h3>TTY устройства</h3>

<p>Все внешние устройства подключенные к компьютерам с unix-подобными операционными системами делятся на несколько типов и
каждому устройству назначается т.н. файл устройства в каталоге /dev.
Устройствам типа терминал (физическим, виртуальным или эмуляторам терминала) тоже назначается свой файл устройства начинаются со слова tty и заканчиваются номером устройства (/dev/tty1, /dev/tty2, ...).
Хотя телетайпы вы вряд ли уже найдете, но сокращение TTY дошло до наших дней.</p>

<p>Каждое TTY устройство имеет два компонента:</p>
<ol>
<li><strong>Драйвер устройства</strong>. Он отвечает за доставку ввода с клавиатуры в программу и за отображение вывода программы на экран.</li>
<li><strong>TTY Line Discipline</strong> (рус. — дисциплина линии). Дисциплина линии — это интерфейс доступа к драйверу, который, однако, привносит немало логики в TTY устройство. Можно сказать, что дисциплина линии проксирует вызовы к драйверу. Какова зона ответственности данного компонента, мы будем узнавать по ходу статьи.</li>
</ol>

<p>Строение TTY устройства:</p>

<p><img src="./dev.jpeg" title="Строение TTY устройства"></p>

<p>Существует 3 типа TTY устройств:</p>

<ol>
<li><em>Console device</em> — обеспечивает работу Virtual Console. Ввод и вывод данного устройства управляется полностью ядром.</li>
<li><em>PTY device</em> (псевдотерминал) — обеспечивают работу терминала в оконном интерфейсе. Ввод и вывод данного устройства управляется эмулятором терминала, который работает в пользовательском пространстве.</li>
<li><em>Serial device</em> — общается напрямую с железом. Обычно не используется напрямую, а существует как самый нижний уровень в организации архитектуры терминального устройства.</li>
</ol><br>
<p>В данной статье мы будем говорить именно о втором типе TTY устройств — псевдотерминалах.</p>
</div>
</body>
</html>